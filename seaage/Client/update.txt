2003.5.15
------------------------------------------------------------------------------
新加入 6 個 cake 文件, 用於藏寶圖系統
minwdmap.cak
tmmask2_1.cak
tmmask5_1.cak
tmmask7_1.cak
wdmapui.cak
worldmap.cak


2003.5.7
------------------------------------------------------------------------------
更新 mapmini.cak


2003.4.22
------------------------------------------------------------------------------
銀行完成
開始組隊

2003.4.14
------------------------------------------------------------------------------
添加 uiinput.cak
添加 uiinput.cpp 和 uiinput.h
添加 client_event.h

2003.4.7
------------------------------------------------------------------------------
itemhint.ini for show Item information


2003.4.2
------------------------------------------------------------------------------
Warning: The BUG has been found in POS Doc!!!!!!


2003.4.1
------------------------------------------------------------------------------
sysmsg.cak for Icon Message
sysmsg.ini for Icon Message



2003.3.27
------------------------------------------------------------------------------
●TODO: 組隊功能需要添加一條拒絕加入隊伍的消息



2003.3.18.
------------------------------------------------------------------------------
(1) 組隊功能:
REQUEST_JOIN_TEAM				// 要求加入隊伍
REQUEST_AGREE_JOIN_TEAM			// 同意加入某隊伍	
REQUEST_EXIT_TEAM				// 要求離開隊伍	
REQUEST_KICK_TEAM_MEMBER		// 要求踢開某隊友	
NOTIFY_SOMEONE_WANT_JOIN_TEAM	// 通知隊長某人想加入
NOTIFY_JOIN_TEAM_FULL			// 通知要加入的隊伍已滿
NOTIFY_ALREADY_IN_TEAM			// 已經在別的隊伍	
NOTIFY_SOMEONE_JOIN_TEAM		// 通知某人加入隊伍	
NOTIFY_SOMEONE_EXIT_TEAM		// 通知某人離開隊伍	
NOTIFY_KICKED_FROM_TEAM			// 通知被踢離隊伍
NOTIFY_TEAM_MEMBER_INFO			// 加入隊伍成功並通知隊友資訊
NOTIFY_TEAM_MEMBER_CHANGEZONE	// 通知隊友換區域	

(2) Update ship-cannon magic images:
explode
shift



2003.3.10.
------------------------------------------------------------------------------
●TODO 本周:
(0)增加地下城種類.
(1)船隻數值
(2)炮戰(數值運算)
(3)貿易系統.



2003.2.26.
------------------------------------------------------------------------------
●TODO: 為引擎單獨書寫一個DEBUG模組, 包含DEBUG網路消息, DEBUG遊戲內容, 查看遊
        戲數值, 動態修改遊戲數值等功能.



2003.2.20.
------------------------------------------------------------------------------
(1)計算砲彈初始垂直速度:
	已知: 初始高度為 z0, 落點高度為 z1, 兩點之間的距離為 d, 總飛行時間為 t, 重力加速度為 g.
	求: 砲彈初始垂直速度 v0?
	分析:
		v0 = (- z0 - g * t * t / 2 ) / t;
(2)FixedBug:
	do_magic_part_sleep() :
	when sleep_tick > 0, we should set sleep tick back to zone magic part.
	SetZoneMagicPartSleepTick(p, sleep_tick);
(3)sysmenu.cak for QuitGame menu.


	

2003.2.17.
------------------------------------------------------------------------------
(1) GOD MSG:
    { 1,    "//hawkepleasegivemefullhpmp"			,chat_command_full_hp_mp				},
    { 1,    "//hawkepleasegivemepropertypoint"		,chat_command_get_property_point		},
    { 1,    "//iwanttojumpto"						,chat_command_jump_to					},
    { 1,    "//showmetheitem"						,chat_command_request_item				},
    { 1,    "//hawkepleaseshowmethemoney"			,chat_command_request_money				},
    { 1,    "//wouldyoumindgivemesomeexp"			,chat_command_request_exp				},
    { 1,    "//jackjackflyfly"						,chat_command_request_move_fast			},
    { 1,    "//hahaicanchangezonenow"				,chat_command_request_change_zone		},
    { 1,    "//gotohell"							,chat_command_request_dead				},



2003.2.11.
------------------------------------------------------------------------------
(1) Update for Version 0.41:
	Add files :		menu\msgboxbn.cak
	Del files:		menu\msgbox.cak
	Update files:	menu\rimimg1.cak



2003.2.10.
------------------------------------------------------------------------------
○FIXEDBUG: 在sprintf("%d,", unsigned_data); 的時候, 需要改為
		sprintf("%u,", unsigned_data);	否則會產生數值溢出或者符號錯.
			

2003.2.8.
------------------------------------------------------------------------------
MEMO::注意網路遊戲的互動性: 社群, 讓玩家留住其他玩家:



2003.1.29.
------------------------------------------------------------------------------
●備忘：刷新物件的時候, 需要從原來運行環境刷新, 因為新的環境物件圖檔沒有連續.
        因為轉圖錯誤, 海洋圖檔暫時用原來的cak格式.

●備忘：media.cpp 中需要添加 sort 功能(stephen).




2003.1.28.
------------------------------------------------------------------------------
○備忘：需要更新 itembase.ini 和 itemicon.cak.



2003.1.25.
------------------------------------------------------------------------------
○備忘：更新QQ代碼的時候需要同步更新圖檔。


2003.1.17.
------------------------------------------------------------------------------
○FixedBug: 在比較快的機器上切換地圖時, 有時候人物不見.
  原因: 主線在 INIT_SHOW_CHANGEMAP_LOADING 時, 會先清除地圖上所有npc, 但是網路
        事件線程同時可能已經接受到 ZONE_LOGIN_OK消息(附帶有玩家npc的資訊), 並active
		該 NPC. 此時, 假如網路線程速度比較快而清除動作比較慢時, 便會造成人物不見.
  解決: 增加了全局變數 g_dwAppEvent , 用來決定不同線程執行的先後順序.



2003.1.11.
------------------------------------------------------------------------------
(1) V0.30需要更新的文件:
    data\\itembase.ini
	data\\magic.ini
	posclient.exe
	hnetgeh.dll


SEANPCFILEINFO: "data\\seanpcfile.ini"


2003.1.2.
------------------------------------------------------------------------------
For test SeaAge of Taiwan:
	Account: xm197
	Password: 64941


2002.12.27.
------------------------------------------------------------------------------
○Modified: 選擇人物進入zone時, 顯示的等級使用level+1.
○FixedBug: QQ陌生人欄位不正常閃動.
○FixedBug: 遊戲中使用蓄力技, 蓄滿後按ESC退出遊戲, 下次進來後, 玩家技能被SERVER
            改變為行走以後, CLIENT 的法術區域依然還在, 並且人物不能移動.
●To Modify: Found error in rayssdk, destroy_sample(...).


●To Modify: 漢字輸入法時需要顯示輸入的KEY(比如使用ABC等).

●To Modify: Client -> 自己, 其他玩家, 怪物等在小地圖上顯示不同的顏色, 以區分.
●To Modify: Server -> 等級升級時2級2級的升級.
●To Modify: Client -> 增加一個接受消息的緩衝機制, 待消息接受一定數量後, 在主
                       進程中一起處理.
●To Modify: Server -> 選擇以前用過的人物進入後, 準備進入ZONE的時候, 收到消息
                       QQ_GET_MYDATA後停住不動了. 後面的消息應該為
					   QQ_GET_FRIEND_LIST.





2002.12.24.
------------------------------------------------------------------------------
●Bug : 海洋地圖(MAP1000.MAP)右下角有阻擋缺口，會走到世界的盡頭。
	●Key & Mouse focus control functions.
	●Message functions.



2002.12.19.
------------------------------------------------------------------------------
(1)Fixed：在陸地和海洋上顯示不同的技能集，以方便玩家選擇。
(2)TODO: 



2002.12.18.
------------------------------------------------------------------------------
○發布了內部測試版(V0.18).



2002.12.17.
------------------------------------------------------------------------------
(1) 執行環境下新增 <macro> 目錄.
(2) 修改了 BOAT.H 中的結構(From Dixon).



2002.12.13.
------------------------------------------------------------------------------
●游標指定的對應位置, 最好能顯現在地面上..讓人很直覺的能知道所指定的點..
●不能走過去的地方, 也在游標上出現改變..比如打個叉叉~
●拿掉戰鬥切換..




2002.12.3.
------------------------------------------------------------------------------
新增有關QQ的控制.


2002.11.9.
------------------------------------------------------------------------------
●新增屬性點影響人物數值設定:
  attack.ini
  defence.ini
  hp.ini
  mp.ini
●修改遊戲中文字字體(日文).


2002.11.7.
------------------------------------------------------------------------------
○收到CHANGE_NPC_DOING時, 如果DOING_KIND為idle, 則依據d4參數進行細部的設定:
	(1) d4 = 0x00000000, 只是簡單的切換為idle狀態.
	(2) d4 & 0x00000001, 除切換為idle狀態外, 還需要重新初始化右鍵法術狀態.
	(3) ...
○添加技能: 連續技, 蓄力技.



2002.11.5.
------------------------------------------------------------------------------
DOOR_IP: 218.5.72.13

萬能五筆 www.newhua.com




2002.11.4.
------------------------------------------------------------------------------
●將 NPC 的 TALK數據從GAME_NPC結構中移除, 改為添加到 NPC_SHOW 結構中, 以確保
  NPC 數據的LOCK, UNLOCK次數盡可能的少.
●DLL 中需要對DOOR_SERVER_CLOSE, WORLD_SERVER_CLOSE, ZONE_SERVER_CLOSE等先做
  相應處理(...dwConnectedServerType), 然後才能發送訊息給client端.
●戰鬥時, 選定一個目標攻擊後, 人物會向該人物靠近, 應該支持在跑近途中改變攻擊
  目標, 但是, 當已經在攻擊時, 則不能改變攻擊目標.




2002.11.1.
------------------------------------------------------------------------------
版本升級到V0.14



2002.10.31.
------------------------------------------------------------------------------
●需要將doingclient.cpp中的處理過程改成與zoneserver的一致.



2002.10.23.
------------------------------------------------------------------------------
V0.13版需要更新文件為:
------------------------------
object\magic 整個目錄
object\objframe.dat
object\objnumber.dat
menu\talkbox0.cak
map\map0000.jjj
map\map0001.jjj
map\map0002.jjj
map\map0003.jjj
client.exe
HNetGEH.dll



2002.10.15.
------------------------------------------------------------------------------
文件打包規劃:
(1) 數值部分	data.pos
	<data>
(2) 選單部分	menu.pos
	<menu>
(3) 音效部分	sound.pos
	<sound>
(4) 音樂部分	music.pos
	<music>
(5)	圖素部分	tile.pos
	<tile>
(6)	房屋部分	house.pos
	<house>
(7)	地圖部分	map.pos
	<map>
(8)	物件部分	object.pos
	<object>
(9)	其他		sea.pos
	...

	


2002.10.14.
------------------------------------------------------------------------------
(TODO) 10.15日6:00AM上傳
○蓄力時的效果, 攻擊時的效果(附加在NPC的身體上)
○添加人物對話框, 對應圖檔(talkbox#.cak)
	3行對話, 頂行人物名字.
●滑鼠的icon改變.
;
●地圖上的怪物出生以及怪物的移動等.
●怪物AI初步設定
;
●攻擊時幀數
●改成簡體文字輸入
●地圖切換
;
●狗,鴿子等特殊NPC的動作和AI.
●殺死怪物後經驗值獲得, 人物等級提昇.
●數值表, 數值計算.
●蓄力的計算.
;
;
●人物對話事件



2002.10.11.
------------------------------------------------------------------------------
(1)修改錯誤: ExecHeartBeat() 中不能直接作刷新的動作，而要紀錄還沒有刷新的次數。
　           在主進程根據該次數作一定的刷新動作。


2002.10.10.
------------------------------------------------------------------------------
(1)添加  npcinfo.ini


2002.10.5.
------------------------------------------------------------------------------
(1)修改錯誤: 物品複製.
(2)錯誤: 連擊時點幾同一個人物會跳動, 變成移動到指定點.
   分析: 由於採用了WINDOWS的事件驅動的方式, 所以在處理某個EVENT的時候, 不能去
         呼叫 idle_loop() 函數, 否則, 會導致衝突. 
   修改: 將 sdk 中讀取cak文件等函數中的idle_loop()拿掉.


2002.9.27.
------------------------------------------------------------------------------
icon360a.cak  蓄力
icon360b.cak  間隔時間
uihp.cak
magarea1.cak


2002.9.25.
------------------------------------------------------------------------------
(1)添加了人物被擊, 死亡的動作.


2002.9.17.
------------------------------------------------------------------------------
(1)加入了 QQ 的功能.
(2)加入了物品的數值結構定義.
(3)將操作與技能相關聯.


2002.9.11.
------------------------------------------------------------------------------
●ＮＰＣ種類：
（０１）砲台ＮＰＣ
（０２）路牌ＮＰＣ
（０３）怪物ＮＰＣ（普通，頭目，ＢＯＳＳ，小偷怪，寶物怪）
（０４）警衛ＮＰＣ
（０５）閒人ＮＰＣ
（０６）玩家ＮＰＣ
（０７）寶藏ＮＰＣ（小島）
（０８）美人魚ＮＰＣ（會改變背景音樂）
（０９）陷阱ＮＰＣ
（１０）暗礁ＮＰＣ
（１１）漩渦ＮＰＣ
（１２）雕像ＮＰＣ


●人物特殊動作事務類型(DOING_KIND):
●TODO: 重新整理人物動作類型
	(1)人物變黑
       變黑後, 以MASK為黑色來播放被擊動作, 並在最後一幀停止一段時間, 停止時間根據攻擊者
	   的技能等級不同而不同. 
	(2)掃射
	   人物以自己周圍360度的範圍內的敵人或者同盟(一定機率)為目標, 進行一定次數的射擊.
	(3)爬起
	   人物從地上爬起來, 與倒地對應.
	(4)倒地
	   玩家的倒地動作與玩家的死亡動作相同, 怪物則不同.
	(5)死亡
	(6)主動自爆
	   人物衝到人群中, 自爆, NPC不貼圖, 取而代之的時爆炸的圖.
	(7)被動自爆
	   死亡時自爆, 同時傷害範圍內敵人.
	(8)吸血
	   播放吸血動作, 並且將中間一些幀重複播放一定次數(持續吸血), 最後播放吸血完成.
	(9)被吸血
	   人物停止在被擊的中間幀, 直到吸血完成或者吸血中斷.
	(10)主動談判
	   參考技能"談判".
	(11)被動談判
		參考技能"談判".
	(12)丟錢待機
	(13)丟錢行走
	(14)拾取物品
	    需要根據人物是否正在使用開鎖技能, 來判斷到達目標後的具體操作, 比如是馬上拾取還是開鎖.
	(15)蓄力
	(16)釋放蓄力技

●人物行走的不同狀態:
	當人物在正常狀態下, 
		(1)普通行走, 普通待機 -> 普通行走 -> 普通待機.(滑鼠點擊為目標)
		(2)戰鬥行走, 戰斗待機 -> 戰鬥行走 -> 戰鬥待機.(滑鼠點擊為目標)
		(3)格擋行走, 格擋待機 -> 格擋行走 -> 格擋待機.(滑鼠點擊為目標)
		(4)丟錢行走, 丟錢待機 -> 丟錢行走 -> 丟錢待機.(滑鼠點擊為目標)
		(5)必殺行走, 必殺動作 -> 必殺動作 -> 必殺動作.(滑鼠點擊為前進方向)
	當人物在遲緩1狀態下, 行走速度下降一定比率, 並作跳幀處理(動作頻率變快), 腳下要貼動畫.
	當人物在遲緩2狀態下, 行走速度下降一定比率, 並作續幀處理(動作頻率變慢), 腳下不貼動畫.
	○所有的行走過程中(除必殺劍外), 都需要判斷人物是否在中毒狀態, 如果是, 則會在一定時間時進行中毒計算, 
	    並且改變動作為被擊, 停止行走.
	○所有的事務類型(除必殺劍外), 都須要判斷NPC是否中毒, 如果中毒, 都可能導致NPC正在進行的事務中斷.





2002.9.10.
------------------------------------------------------------------------------
技能icon: menu\skillico.cak
技能介面: menu\uiskill.cak



●道具表現種類：
（０１）寶箱怪
（０２）寶箱（陸地道具）
（０３）木箱（海洋道具）
（０４）木桶（物資類道具）
（０５）介面上顯示種類
　　　　陸地裝備，藥水，貨物，修理材料，補給，炮，帆等。

●事件類別
（０１）普通出入口事件（點－－點）
（０２）線性出入口事件（線－－線）
（０３）港口事件（可以成為攻擊目標）
（０４）道具事件（如寶箱怪）
（０５）ＮＰＣ事件
（０６）傳送點事件（從本張地圖上的一個地方到另外一個地方）

●天氣及地圖特效
（０１）暴雨（閃電）
（０２）中雨
（０３）小雨
（０４）晴
（０５）霧
（０６）雪
（０７）雲
（０８）風
（０９）落石
（１０）白天黑夜
（１１）地圖震動
（１２）盲目時的光圈形圖形表現


●鑰匙分類
（０１）藏寶室（同一地圖，開門）
（０２）房屋（同一地圖，開門）
（０３）進出提督府（同地圖房屋）
（０４）航海藏寶圖（進入另外一張地圖）

●怪物出現方式
（０１）在固定點周圍出現。
（０２）某點Ａ出現，跑到某點Ｂ消失。
（０３）一直存在或者一定時間內存在於某固定位置。
（０４）觸發某事件後出現（如寶箱怪，寶藏守護怪，任務事件觸發）



2002.9.4.
------------------------------------------------------------------------------
●寶藏地圖。
　（１）寶藏地圖本身屬於一個特殊物品，但是該物品由很多其他的物品按照一定的位置
　　　　和規則起組成。
　（２）寶藏地圖的拼接操作和數據處理。


●連續技的實現
　ＮＰＣ擁有一個將要進行的事務類型對列。


●鍵盤操作:
  ○ＣＴＲＬ＋０∼ＣＴＲＬ＋９鍵
　　玩家的表情動作. 根據不同的按鍵方式, 有不同的表情表現方式.
　　（１）按一次：作一次表情動作.
　　（２）按多次：作多次表情動作.
　　（３）長　按：表情動作停止在某一幀。
　○Ｆ１∼Ｆ８鍵
　　（１）由玩家自己設定為技能的快捷鍵。
　○Ｙ鍵
　　（１）回答是否與對方進行交易。
　　（２）回答是否同意對方加入本隊伍。
　○Ｒ鍵
　　（１）切換自動行走開關。


●怪物AI:
　（１）怪物在被擊的一剎那需要有對應的AI.
　（２）警衛需要紀錄敵對商會，並且在主動選擇攻擊目標時，要先根據對方是否是敵對
　　　　商會會員，是否是敵對商會會員的隊友來決定是否是合法的攻擊目標。

●3種法術傷害種類:
  (1)物理傷害(直接數值)
  (2)法術傷害(傷害點數 * (1-防百分比) )
  (3)特殊傷害(傷害點數)

●人物的天生特殊屬性:
  (1)隱身
  (2)物理傷害免疫(只有1點傷害)
  (3)法術傷害免疫(只有1點傷害)

●人物跟隨

●物品實體資料結構:
  SLONG	item_no;	//物品編號(基本物品表)
  SLONG	id;			//唯一ID(預防物品複製)
  //todo;...

●關聯:
  有些物品會和地圖陷阱相關聯.


2002.9.3.
------------------------------------------------------------------------------
●人物的附加貼圖:
  (1)頭頂異常狀態
  (2)身體異常狀態
  (3)腳底異常狀態
  (4)身體上扣血時貼圖
  (5)身體上防具被破壞時貼圖
  (6)...

●法術動畫可能出現的位置:
  (1)NPC的腳底下(如捕獸夾).
  (2)NPC的頭頂
  (3)NPC的身體上
  (4)To be continue...

●地圖陷阱系統
●地圖上的法術光圈(神恩浩蕩, 惡魔)紀錄.
●地圖上的怪物需要紀錄撥號(組號), 用來控制怪物的新生和復活2(對本組怪物).

●畫面表現特效:
  (1)法術導致地圖全屏的總體亮, 暗效果, 注意神恩浩蕩(加亮)與惡魔(變暗)的重疊.
  (2)天氣遇到暴風雨時, 地圖全屏偏暗.
  (3)時間系統中白天黑夜, 地圖全屏偏藍色.
  (4)盲目時在人物周圍一定範圍畫面正常, 而在該範圍以外畫面逐漸變暗.
  //
  (5)地圖震動.
  (6)下雨, 最好雨絲落下方向隨風向改變.
  (7)下雪.
  (8)雲彩, 飄動方向隨風向改變.
  (9)閃電, 全畫面突然變白.


●玩家對話設定:
	玩家對話文字顏色, 對話底框顏色 可以由玩家自己設定.
	玩家頭上名字的顏色根據該玩家殺人次數(PK值)的不同而有4種顏色的變化.
	玩家對話名字前有所屬商會的圖形標誌, 玩家可以自建圖形標誌上傳, 經過GM審核確定後更新.


2002.9.2.
------------------------------------------------------------------------------
(1) NPC的數據中添加一個 pk_state, 當npc進行動作時, 使用該標記來表現npc
    的對應動作細節.
●TODO:
(2) NPC的數據中需要添加有關船隻和海怪的數據, 以表現海洋中的NPC, 與此同
    時, 還需要個 KIND 表示NPC的類別, 以判斷該NPC是屬於哪一種.




2002.8.23.
------------------------------------------------------------------------------
//●TODO: 參考 CharUpper, CharLower, CharNext, CharPrev 等函數.
//        這些函數可以處理中文和英文混排的字串.



2002.8.21.
------------------------------------------------------------------------------
TODO:
●轉換船隻和海怪NPC.
●船隻在海面上的行走: 需要作彎曲形轉向, 自動圓角轉向.
●GB與BIG5的動態轉換.
●法術系統.
●連續技和蓄力技.
●船隻介面.
●技能介面.
●任務介面.
●物品數值, 法術數值.
●任務系統.
●......


2002.8.20.
------------------------------------------------------------------------------
(1) 完善顯示NPC對話模組, 將NPC的對話總是顯示在地圖的最上層.


2002.8.12.
------------------------------------------------------------------------------
(1) 增加了 F10 關閉或者打開地圖上選單的功能.



2002.8.8.
------------------------------------------------------------------------------
(1) 將 tileset 中的圖素連接等資訊外置為 ini 文件.


2002.8.6.
------------------------------------------------------------------------------
graphics web:
www.softeden.com/FUN/fun1.htm
www.sonicalbum.com


中國思維網
www.chinathink.net



2002.8.2.
------------------------------------------------------------------------------
調整了介面上部分顯示不整齊的文字的座標.



2002.6.19.
------------------------------------------------------------------------------
TODO:
add manchar picture manface.cak.



文件格式資源:
http://www.wotsit.org/default.asp



5173070(廣東燒臘)
5073190(桂林米粉)
5185092(6F)
8869931(炒泡麵)
2209565(阿土仔)

