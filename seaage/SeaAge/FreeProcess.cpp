/*
**  FreeProcess.cpp
**  free process functions.
**
**  Jack, 2002.5.15.
*/
#include "mainfun.h"
#include "FreeProcess.h"


//GLOBALS ////////////////////////////////////////////////////////////////////////////////////////
FREE_PROCESS_STACK  free_process_stack = {{NULL}, -1};


//////////////////////////////////////////////////////////////////////////////////////////////////
// FREE PROCESS FUNCTIONS(用來執行釋放內存等)                                                   //
//////////////////////////////////////////////////////////////////////////////////////////////////
void    init_free_process(void)
{
    SLONG   i;

    for(i=0; i<MAX_FREE_PROCESS; i++)
    {
        free_process_stack.func[i] = NULL;
    }
    free_process_stack.top = -1;
}


void    push_free_process(void (*func)(void))
{
    if(free_process_stack.top < MAX_FREE_PROCESS-1)
    {
        free_process_stack.top++;
        free_process_stack.func[free_process_stack.top] = func;
    }
}


void    exec_free_process(void)
{
    while(free_process_stack.top >= 0)
    {
        free_process_stack.func[free_process_stack.top]();
        free_process_stack.top --;
    }
}

//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////
